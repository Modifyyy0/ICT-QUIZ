<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kazakh Culture Quiz</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial', sans-serif;
        }

        body {
            min-height: 100vh;
            background: linear-gradient(135deg, #e0f2fe 0%, #f0f9ff 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 16px;
        }

        .container {
            max-width: 500px;
            width: 100%;
            margin: 0 auto;
        }

        .screen {
            display: none;
            animation: fadeIn 0.3s ease-in-out;
        }

        .screen.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .card {
            background: white;
            border-radius: 24px;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.15);
            padding: 32px;
            text-align: center;
        }

        h1 {
            font-size: 28px;
            font-weight: 800;
            color: #1e293b;
            margin-bottom: 32px;
        }

        .btn {
            width: 100%;
            padding: 16px 24px;
            border: none;
            border-radius: 16px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            margin-bottom: 12px;
        }

        .btn-en {
            background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
            color: white;
        }

        .btn-en:hover {
            background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);
            transform: translateY(-2px);
        }

        .btn-zh {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            color: white;
        }

        .btn-zh:hover {
            background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
            transform: translateY(-2px);
        }

        .progress-container {
            background: white;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            padding: 16px;
            margin-bottom: 24px;
            border-radius: 20px;
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
            font-size: 14px;
            color: #64748b;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e2e8f0;
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        .question-image {
            width: 100%;
            height: 192px;
            object-fit: cover;
            border-radius: 16px;
            margin-bottom: 24px;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }

        .question-text {
            font-size: 20px;
            font-weight: 700;
            color: #1e293b;
            margin-bottom: 24px;
            line-height: 1.4;
        }

        .options-container {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-bottom: 24px;
        }

        .option {
            padding: 16px 20px;
            border: 2px solid #e2e8f0;
            border-radius: 16px;
            text-align: left;
            cursor: pointer;
            transition: all 0.2s ease;
            background: #f8fafc;
            font-size: 16px;
            color: #334155;
        }

        .option:hover {
            background: #f1f5f9;
            border-color: #cbd5e1;
        }

        .option.correct {
            background: #dcfce7;
            border-color: #22c55e;
            color: #166534;
            font-weight: 600;
        }

        .option.incorrect {
            background: #fee2e2;
            border-color: #ef4444;
            color: #991b1b;
            font-weight: 600;
        }

        .explanation {
            background: #dbeafe;
            border: 2px solid #bfdbfe;
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 24px;
            color: #1e40af;
            font-size: 14px;
            line-height: 1.5;
        }

        .btn-next {
            background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);
            color: white;
            font-weight: 600;
        }

        .btn-next:disabled {
            background: #e2e8f0;
            color: #94a3b8;
            cursor: not-allowed;
            transform: none;
        }

        .btn-next:not(:disabled):hover {
            background: linear-gradient(135deg, #7c3aed 0%, #6d28d9 100%);
            transform: translateY(-2px);
        }

        .results-container {
            text-align: center;
        }

        .score-circle {
            width: 128px;
            height: 128px;
            background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 24px;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
        }

        .score-text {
            background: white;
            width: 112px;
            height: 112px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            font-weight: 800;
            color: #ea580c;
        }

        .results-title {
            font-size: 28px;
            font-weight: 800;
            color: #1e293b;
            margin-bottom: 16px;
        }

        .results-message {
            background: #dcfce7;
            border: 2px solid #4ade80;
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 32px;
        }

        .results-score {
            font-size: 24px;
            font-weight: 700;
            color: #166534;
            margin-bottom: 12px;
        }

        .results-instruction {
            color: #15803d;
            font-size: 16px;
            line-height: 1.5;
        }

        .btn-restart {
            background: linear-gradient(135deg, #8b5cf6 0%, #ec4899 100%);
            color: white;
            font-weight: 600;
        }

        .btn-restart:hover {
            background: linear-gradient(135deg, #7c3aed 0%, #db2777 100%);
            transform: translateY(-2px);
        }

        .next-text {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .siren-warning {
            background: #fee2e2;
            border: 2px solid #f87171;
            border-radius: 16px;
            padding: 16px;
            margin: 16px 0;
            color: #991b1b;
            font-weight: 600;
            display: none;
        }

        @media (max-width: 480px) {
            .card {
                padding: 24px;
            }
            
            h1 {
                font-size: 24px;
            }
            
            .question-text {
                font-size: 18px;
            }
            
            .score-circle {
                width: 100px;
                height: 100px;
            }
            
            .score-text {
                width: 84px;
                height: 84px;
                font-size: 24px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Language Selection Screen -->
        <div id="language-screen" class="screen active">
            <div class="card">
                <h1 id="welcome-title">Kazakh Culture Quiz!</h1>
                <button id="btn-en" class="btn btn-en">English</button>
                <button id="btn-zh" class="btn btn-zh">‰∏≠Êñá</button>
            </div>
        </div>

        <!-- Quiz Screen -->
        <div id="quiz-screen" class="screen">
            <div class="progress-container">
                <div class="progress-header">
                    <span id="question-counter">Question 1/10</span>
                    <span id="progress-percent">10%</span>
                </div>
                <div class="progress-bar">
                    <div id="progress-fill" class="progress-fill" style="width: 10%;"></div>
                </div>
            </div>
            <div class="card">
                <img id="question-image" class="question-image" src="" alt="Question illustration">
                <h2 id="question-text" class="question-text"></h2>
                <div id="options-container" class="options-container"></div>
                <div id="explanation" class="explanation" style="display: none;"></div>
                <div id="siren-warning" class="siren-warning">
                    üö® SIREN! You've been exposed to Borat! üö®
                </div>
                <button id="btn-next" class="btn btn-next" disabled>
                    <span class="next-text">
                        <span id="next-text">Next Question</span>
                        <i class="fas fa-chevron-right"></i>
                    </span>
                </button>
            </div>
        </div>

        <!-- Results Screen -->
        <div id="results-screen" class="screen">
            <div class="card">
                <div class="results-container">
                    <div class="score-circle">
                        <div class="score-text" id="final-score">0/10</div>
                    </div>
                    <h2 id="results-title" class="results-title">Results!</h2>
                    <div id="results-message" class="results-message"></div>
                    <button id="btn-restart" class="btn btn-restart">
                        <i class="fas fa-redo"></i>
                        <span id="restart-text">Take Quiz Again</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Quiz data
        const quizData = {
            en: [
                {
                    question: "When a Kazakh says 'Go drink some tea', it means:",
                    image: "https://placehold.co/400x300/8B5CF6/FFFFFF?text=Tea+Time",
                    options: ["Just tea", "Tea, 10 dishes, and 3 hours of conversation"],
                    correctAnswer: 1,
                    explanation: "In Kazakh culture, 'drink tea' is an invitation for a full feast."
                },
                {
                    question: "For Kazakh ppl relatives from mothers side are considered as?",
                    image: "https://placehold.co/400x300/EF4444/FFFFFF?text=Na«µashy",
                    options: ["Delivery guy", "Free restaurant"],
                    correctAnswer: 1,
                    explanation: "Mother's side of the family - they're obligated to feed you for free."
                },
                {
                    question: "Math question: If invited to a wedding at 7 PM, you should arrive at:",
                    image: "https://placehold.co/400x300/10B981/FFFFFF?text=Wedding",
                    options: ["6:30 PM", "7:00 PM", "8:00 PM", "9:00 PM"],
                    correctAnswer: 3,
                    explanation: "Kazakh time is flexible! 7 PM invitation means you can arrive anytime, even at 9!"
                },
                {
                    question: "If Kazakh says (Did you come?), they actually mean:",
                    image: "https://placehold.co/400x300/F59E0B/FFFFFF?text=Greetings",
                    options: ["Are you here?", "Where have you been? I missed you!"],
                    correctAnswer: 1,
                    explanation: "It's not about your arrival, it's about expressing how much they missed you!"
                },
                {
                    question: "When visiting a Kazakh home, you must:",
                    image: "https://placehold.co/400x300/06B6D4/FFFFFF?text=Hospitality",
                    options: ["Bring a small gift", "Refuse food 3 times before accepting"],
                    correctAnswer: 1,
                    explanation: "Refusing food shows respect, but they'll insist until you accept."
                },
                {
                    question: "The most important thing at a Kazakh dining table is:",
                    image: "https://placehold.co/400x300/8B5CF6/FFFFFF?text=Dastarkhan",
                    options: ["Having enough chairs", "Never letting the guest's plate be empty"],
                    correctAnswer: 1,
                    explanation: "A good host keeps refilling your plate - it's a sign of respect and care."
                },
                {
                    question: "If a Kazakh elder offers you kumys (fermented horse's milk), you should:",
                    image: "https://placehold.co/400x300/16A34A/FFFFFF?text=Kumys",
                    options: ["Politely decline", "Drink it all and ask for more!"],
                    correctAnswer: 1,
                    explanation: "Refusing kumys can be seen as disrespectful. Better to try at least a little."
                },
                {
                    question: "When toasting at a Kazakh celebration, you should:",
                    image: "https://placehold.co/400x300/DC2626/FFFFFF?text=Toast",
                    options: ["Drink quickly", "Hold your glass lower than elders"],
                    correctAnswer: 1,
                    explanation: "Showing respect to elders by holding your glass lower is essential."
                },
                {
                    question: "Do you Dimash Kudaibergen?",
                    image: "https://placehold.co/400x300/7C3AED/FFFFFF?text=Compliment",
                    options: ["Yes"],
                    correctAnswer: 0,
                    explanation: "Of course you know him. RIGHT?"
                },
                {
                    question: "Have you watched Borat?",
                    image: "https://placehold.co/400x300/6B7280/FFFFFF?text=Borat",
                    options: ["Yes", "No"],
                    correctAnswer: 1,
                    explanation: "Borat doesn't represent real Kazakh culture at all btw."
                }
            ],
            zh: [
                {
                    question: "ÂΩìÂìàËê®ÂÖã‰∫∫ËØ¥'ÂéªÂñùÁÇπËå∂Âêß'ÔºåÊÑèÊÄùÊòØÔºö",
                    image: "https://placehold.co/400x300/8B5CF6/FFFFFF?text=ÂñùËå∂Êó∂Èó¥",
                    options: ["Âè™ÊòØÂñùËå∂", "Ëå∂„ÄÅ10ÈÅìËèúÂíå3Â∞èÊó∂ÁöÑËÅäÂ§©"],
                    correctAnswer: 1,
                    explanation: "Âú®ÂìàËê®ÂÖãÊñáÂåñ‰∏≠Ôºå'ÂñùÁÇπËå∂'ÊòØÈÇÄËØ∑‰Ω†ÂèÇÂä†ÁõõÂÆ¥ÂíåÈïøÊó∂Èó¥Ê¨æÂæÖÔºÅ"
                },
                {
                    question: "ÂØπÂìàËê®ÂÖã‰∫∫ ‚ÄòÂ¶àÂ¶àÁöÑÂì•Âì•‚Äô ÊòØË∞ÅÔºü",
                    image: "https://placehold.co/400x300/EF4444/FFFFFF?text=Na«µashy",
                    options: ["Â§ñÂçñÂ∞èÂì•", "ÂÖçË¥πÈ§êÂéÖ"],
                    correctAnswer: 1,
                    explanation: "Na«µashyÊåá‰Ω†ÊØç‰∫≤ÂÆ∂ÁöÑ‰∫≤Êàö‚Äî‚Äî‰ªñ‰ª¨Êúâ‰πâÂä°ÂÖçË¥πÊãõÂæÖ‰Ω†„ÄÇ"
                },
                {
                    question: "Êï∞Â≠¶È¢òÔºöÂ¶ÇÊûúË¢´ÈÇÄËØ∑7ÁÇπÂèÇÂä†Â©öÁ§ºÔºå‰Ω†Â∫îËØ•Âá†ÁÇπÂà∞Ôºü",
                    image: "https://placehold.co/400x300/10B981/FFFFFF?text=Â©öÁ§º",
                    options: ["6:30", "7:00", "8:00", "9:00"],
                    correctAnswer: 3,
                    explanation: "ÂìàËê®ÂÖãÊó∂Èó¥ÂæàÁÅµÊ¥ªÔºÅ7ÁÇπÈÇÄËØ∑ÊÑèÂë≥ÁùÄ‰Ω†ÂèØ‰ª•ÈöèÊó∂Âà∞ËææÔºåÁîöËá≥9ÁÇπÔºÅ"
                },
                {
                    question: "ÂΩìÊúâ‰∫∫ËØ¥ (‰Ω†Êù•‰∫ÜÂêó?)Ôºå‰ªñ‰ª¨ÂÆûÈôÖ‰∏äÊÑèÊÄùÊòØÔºö",
                    image: "https://placehold.co/400x300/F59E0B/FFFFFF?text=ÈóÆÂÄô",
                    options: ["‰Ω†Âà∞‰∫ÜÂêóÔºü", "‰Ω†ÂéªÂì™ÂÑø‰∫ÜÔºüÊàëÊÉ≥‰Ω†‰∫ÜÔºÅ"],
                    correctAnswer: 1,
                    explanation: "Ëøô‰∏çÊòØÈóÆ‰Ω†ÊòØÂê¶Âà∞ËææÔºåËÄåÊòØË°®Ëææ‰ªñ‰ª¨ÊúâÂ§öÊÉ≥Âøµ‰Ω†ÔºÅ"
                },
                {
                    question: "ÊãúËÆøÂìàËê®ÂÖãÂÆ∂Â∫≠Êó∂Ôºå‰Ω†ÂøÖÈ°ªÔºö",
                    image: "https://placehold.co/400x300/06B6D4/FFFFFF?text=Ê¨æÂæÖ",
                    options: ["Â∏¶‰∏™Â∞èÁ§ºÁâ©", "ÊãíÁªùÈ£üÁâ©3Ê¨°ÂêéÂÜçÊé•Âèó"],
                    correctAnswer: 1,
                    explanation: "ÊãíÁªùÈ£üÁâ©Ë°®Á§∫Â∞äÈáçÔºå‰ΩÜ‰ªñ‰ª¨‰ºö‰∏ÄÁõ¥ÂùöÊåÅÁõ¥Âà∞‰Ω†Êé•ÂèóÔºÅ"
                },
                {
                    question: "Âú®ÂìàËê®ÂÖãËææÊñØÁâπÂç°Ê±óÔºàÈ§êÊ°åÔºâ‰∏äÊúÄÈáçË¶ÅÁöÑÊòØÔºö",
                    image: "https://placehold.co/400x300/8B5CF6/FFFFFF?text=ËææÊñØÁâπÂç°Ê±ó",
                    options: ["ÊúâË∂≥Â§üÁöÑÊ§ÖÂ≠ê", "Áªù‰∏çËÆ©ÂÆ¢‰∫∫ÁöÑÁõòÂ≠êÁ©∫ÁùÄ"],
                    correctAnswer: 1,
                    explanation: "Â•Ω‰∏ª‰∫∫‰ºö‰∏çÊñ≠Áªô‰Ω†Ê∑ªËèú‚Äî‚ÄîËøôÊòØÂ∞äÈáçÂíåÂÖ≥ÂøÉÁöÑÊ†áÂøóÔºÅ"
                },
                {
                    question: "Â¶ÇÊûúÂìàËê®ÂÖãÈïøËæàÁªô‰Ω†È©¨Â•∂ÈÖíÔºàkumysÔºâÔºå‰Ω†Â∫îËØ•Ôºö",
                    image: "https://placehold.co/400x300/16A34A/FFFFFF?text=È©¨Â•∂ÈÖí",
                    options: ["Á§ºË≤åÊãíÁªù", "ÂÖ®ÈÉ®ÂñùÂÆåÂπ∂Ë¶ÅÊ±ÇÂÜçÊù•‰∏ÄÊùØÔºÅ"],
                    correctAnswer: 1,
                    explanation: "ÊãíÁªùÈ©¨Â•∂ÈÖíÂèØËÉΩË¢´ËßÜ‰∏∫‰∏çÂ∞äÈáç„ÄÇÊúÄÂ•ΩËá≥Â∞ëÂ∞ùËØï‰∏ÄÁÇπÔºÅ"
                },
                {
                    question: "Âú®ÂìàËê®ÂÖãÂ∫ÜÁ•ùÊ¥ªÂä®‰∏≠Á•ùÈÖíÊó∂Ôºå‰Ω†Â∫îËØ•Ôºö",
                    image: "https://placehold.co/400x300/DC2626/FFFFFF?text=Á•ùÈÖí",
                    options: ["Âø´ÈÄüÂñùÂÆå", "ÈÖíÊùØ‰∏æÂæóÊØîÈïøËæà‰Ωé"],
                    correctAnswer: 1,
                    explanation: "ÈÄöËøá‰∏æ‰ΩéÈÖíÊùØÂêëÈïøËæàË°®Á§∫Â∞äÈáçÊòØÈùûÂ∏∏ÈáçË¶ÅÁöÑÔºÅ"
                },
                {
                    question: "‰Ω†Áü•ÈÅìËø™ÁéõÂ£´ÊòØË∞ÅÂêóÔºü",
                    image: "https://placehold.co/400x300/7C3AED/FFFFFF?text=ËµûÁæé",
                    options: ["Áü•ÈÅì"],
                    correctAnswer: 0,
                    explanation: "Good Job!"
                },
                {
                    question: "‰Ω†ÁúãËøá„ÄäÊ≥¢ÊãâÁâπ„ÄãÂêóÔºü",
                    image: "https://placehold.co/400x300/6B7280/FFFFFF?text=Ê≥¢ÊãâÁâπ",
                    options: ["ÁúãËøá", "Ê≤°ÁúãËøá"],
                    correctAnswer: 1,
                    explanation: "'Ê≥¢ÊãâÁâπ' ÂÆåÂÖ®‰∏çËÉΩ‰ª£Ë°®ÁúüÊ≠£ÁöÑÂìàËê®ÂÖãÊñáÂåñ„ÄÇ"
                }
            ]
        };

        // State variables
        let currentLanguage = null;
        let currentQuestion = 0;
        let userAnswers = [];
        let showResult = false;
        let selectedOption = null;

        // DOM Elements
        const screens = {
            language: document.getElementById('language-screen'),
            quiz: document.getElementById('quiz-screen'),
            results: document.getElementById('results-screen')
        };

        const elements = {
            // Language screen
            welcomeTitle: document.getElementById('welcome-title'),
            btnEn: document.getElementById('btn-en'),
            btnZh: document.getElementById('btn-zh'),
            
            // Quiz screen
            questionCounter: document.getElementById('question-counter'),
            progressPercent: document.getElementById('progress-percent'),
            progressFill: document.getElementById('progress-fill'),
            questionImage: document.getElementById('question-image'),
            questionText: document.getElementById('question-text'),
            optionsContainer: document.getElementById('options-container'),
            explanation: document.getElementById('explanation'),
            sirenWarning: document.getElementById('siren-warning'),
            btnNext: document.getElementById('btn-next'),
            nextText: document.getElementById('next-text'),
            
            // Results screen
            finalScore: document.getElementById('final-score'),
            resultsTitle: document.getElementById('results-title'),
            resultsMessage: document.getElementById('results-message'),
            btnRestart: document.getElementById('btn-restart'),
            restartText: document.getElementById('restart-text')
        };

        // Event Listeners
        elements.btnEn.addEventListener('click', () => selectLanguage('en'));
        elements.btnZh.addEventListener('click', () => selectLanguage('zh'));
        elements.btnNext.addEventListener('click', handleNext);
        elements.btnRestart.addEventListener('click', resetQuiz);

        // Functions
        function selectLanguage(lang) {
            currentLanguage = lang;
            currentQuestion = 0;
            userAnswers = [];
            showResult = false;
            selectedOption = null;
            
            // Update translations
            updateTranslations();
            
            // Show quiz screen
            showScreen('quiz');
            loadQuestion();
        }

        function updateTranslations() {
            if (currentLanguage === 'en') {
                elements.welcomeTitle.textContent = 'Kazakh Culture Quiz!';
                elements.nextText.textContent = currentQuestion === 9 ? 'View Results' : 'Next Question';
                elements.restartText.textContent = 'Take Quiz Again';
            } else {
                elements.welcomeTitle.textContent = 'ÂìàËê®ÂÖãÊñáÂåñÊµãÈ™åÔºÅ';
                elements.nextText.textContent = currentQuestion === 9 ? 'Êü•ÁúãÁªìÊûú' : '‰∏ã‰∏ÄÈ¢ò';
                elements.restartText.textContent = 'ÈáçÊñ∞ÂèÇÂä†ÊµãÈ™å';
            }
        }

        function showScreen(screenName) {
            Object.keys(screens).forEach(name => {
                screens[name].classList.remove('active');
            });
            screens[screenName].classList.add('active');
        }

        function loadQuestion() {
            const questionData = quizData[currentLanguage][currentQuestion];
            
            // Update question counter and progress
            elements.questionCounter.textContent = currentLanguage === 'en' 
                ? `Question ${currentQuestion + 1}/10`
                : `ÈóÆÈ¢ò ${currentQuestion + 1}/10`;
            
            const progressPercent = Math.round(((currentQuestion + 1) / 10) * 100);
            elements.progressPercent.textContent = `${progressPercent}%`;
            elements.progressFill.style.width = `${progressPercent}%`;
            
            // Update question content
            elements.questionImage.src = questionData.image;
            elements.questionText.textContent = questionData.question;
            
            // Clear and add options
            elements.optionsContainer.innerHTML = '';
            questionData.options.forEach((option, index) => {
                const optionDiv = document.createElement('div');
                optionDiv.className = 'option';
                optionDiv.textContent = option;
                optionDiv.addEventListener('click', () => selectOption(index));
                elements.optionsContainer.appendChild(optionDiv);
            });
            
            // Hide explanation, siren warning and disable next button
            elements.explanation.style.display = 'none';
            elements.sirenWarning.style.display = 'none';
            elements.btnNext.disabled = true;
            
            // Update next button text
            if (currentLanguage === 'en') {
                elements.nextText.textContent = currentQuestion === 9 ? 'View Results' : 'Next Question';
            } else {
                elements.nextText.textContent = currentQuestion === 9 ? 'Êü•ÁúãÁªìÊûú' : '‰∏ã‰∏ÄÈ¢ò';
            }
        }

        function selectOption(optionIndex) {
            if (showResult) return;
            
            selectedOption = optionIndex;
            userAnswers[currentQuestion] = optionIndex;
            showResult = true;
            
            // Special handling for Borat question (last question)
            if (currentQuestion === 9 && optionIndex === 0) {
                // User said "Yes" to Borat - show visual siren warning instead of audio
                elements.sirenWarning.style.display = 'block';
            }
            
            // Show results for each option
            const options = elements.optionsContainer.querySelectorAll('.option');
            const questionData = quizData[currentLanguage][currentQuestion];
            
            options.forEach((option, index) => {
                option.removeEventListener('click', () => selectOption(index));
                if (index === questionData.correctAnswer) {
                    option.className = 'option correct';
                } else if (index === selectedOption) {
                    option.className = 'option incorrect';
                }
            });
            
            // Show explanation
            elements.explanation.textContent = questionData.explanation;
            elements.explanation.style.display = 'block';
            
            // Enable next button
            elements.btnNext.disabled = false;
        }

        function handleNext() {
            if (currentQuestion < 9) {
                currentQuestion++;
                showResult = false;
                selectedOption = null;
                loadQuestion();
            } else {
                // Show results screen
                showResults();
            }
        }

        function showResults() {
            const score = calculateScore();
            
            // Update results screen based on score
            elements.finalScore.textContent = `${score}/10`;
            
            let message = "";
            if (score >= 7) {
                message = currentLanguage === 'en' 
                    ? "<strong>You're Kazakh?</strong><br>Either you're actually Kazakh or you've been adopted by a Kazakh family. No other choices.  (Ask your parents maybe they are hiding something from you)"
                    : "<strong>‰Ω†ÊòØÂìàËê®ÂÖã‰∫∫ÂêóÔºü</strong><br>Ë¶Å‰πà‰Ω†ÁúüÁöÑÊòØÂìàËê®ÂÖã‰∫∫ÔºåË¶Å‰πà‰Ω†Â∑≤ÁªèË¢´ÂìàËê®ÂÖãÂÆ∂Â∫≠Êî∂ÂÖª‰∫ÜÔºÅ";
            } else if (score >= 5) {
                message = currentLanguage === 'en' 
                    ? "<strong>You have Kazakh blood!</strong><br>There's definitely some Kazakh heritage flowing in your veins. (Ask your parents maybe they are hiding something from you)" 
                    : "<strong>‰Ω†ÊúâÂìàËê®ÂÖãË°ÄÁªüÔºÅ</strong><br>‰Ω†ÁöÑË°ÄÊ∂≤‰∏≠ËÇØÂÆöÊµÅÊ∑åÁùÄÂìàËê®ÂÖã‰∫∫ÁöÑË°ÄËÑâ.";
            } else {
                message = currentLanguage === 'en' 
                    ? "<strong>Find a Kazakh friend!</strong><br>Time to make some Kazakh friends and learn about their amazing culture ASAP." 
                    : "<strong>Êâæ‰∏™ÂìàËê®ÂÖãÊúãÂèãÔºÅ</strong><br>ÊòØÊó∂ÂÄô‰∫§‰∫õÂìàËê®ÂÖãÊúãÂèãÔºå‰∫ÜËß£‰ªñ‰ª¨Á≤æÂΩ©ÁöÑÊñáÂåñ‰∫ÜÔºÅ";
            }
            
            elements.resultsMessage.innerHTML = message;
            elements.resultsTitle.textContent = currentLanguage === 'en' ? 'Results!' : 'ÁªìÊûúÔºÅ';
            
            showScreen('results');
        }

        function calculateScore() {
            let score = 0;
            const quiz = quizData[currentLanguage];
            for (let i = 0; i < 10; i++) {
                if (userAnswers[i] === quiz[i].correctAnswer) {
                    score++;
                }
            }
            return score;
        }

        function resetQuiz() {
            currentLanguage = null;
            currentQuestion = 0;
            userAnswers = [];
            showResult = false;
            selectedOption = null;
            showScreen('language');
        }
    </script>
</body>
</html>

