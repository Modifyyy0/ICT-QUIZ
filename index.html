<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kazakh Culture Quiz</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial', sans-serif;
        }

        body {
            min-height: 100vh;
            background: linear-gradient(135deg, #e0f2fe 0%, #f0f9ff 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 16px;
        }

        .container {
            max-width: 500px;
            width: 100%;
            margin: 0 auto;
        }

        .screen {
            display: none;
            animation: fadeIn 0.3s ease-in-out;
        }

        .screen.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .card {
            background: white;
            border-radius: 24px;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.15);
            padding: 32px;
            text-align: center;
        }

        h1 {
            font-size: 28px;
            font-weight: 800;
            color: #1e293b;
            margin-bottom: 32px;
        }

        .btn {
            width: 100%;
            padding: 16px 24px;
            border: none;
            border-radius: 16px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            margin-bottom: 12px;
        }

        .btn-en {
            background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
            color: white;
        }

        .btn-en:hover {
            background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);
            transform: translateY(-2px);
        }

        .btn-zh {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            color: white;
        }

        .btn-zh:hover {
            background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
            transform: translateY(-2px);
        }

        .progress-container {
            background: white;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            padding: 16px;
            margin-bottom: 24px;
            border-radius: 20px;
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
            font-size: 14px;
            color: #64748b;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e2e8f0;
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        .question-image {
            width: 100%;
            height: 192px;
            object-fit: cover;
            border-radius: 16px;
            margin-bottom: 24px;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }

        .question-text {
            font-size: 20px;
            font-weight: 700;
            color: #1e293b;
            margin-bottom: 24px;
            line-height: 1.4;
        }

        .options-container {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-bottom: 24px;
        }

        .option {
            padding: 16px 20px;
            border: 2px solid #e2e8f0;
            border-radius: 16px;
            text-align: left;
            cursor: pointer;
            transition: all 0.2s ease;
            background: #f8fafc;
            font-size: 16px;
            color: #334155;
        }

        .option:hover {
            background: #f1f5f9;
            border-color: #cbd5e1;
        }

        .option.correct {
            background: #dcfce7;
            border-color: #22c55e;
            color: #166534;
            font-weight: 600;
        }

        .option.incorrect {
            background: #fee2e2;
            border-color: #ef4444;
            color: #991b1b;
            font-weight: 600;
        }

        .explanation {
            background: #dbeafe;
            border: 2px solid #bfdbfe;
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 24px;
            color: #1e40af;
            font-size: 14px;
            line-height: 1.5;
        }

        .btn-next {
            background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);
            color: white;
            font-weight: 600;
        }

        .btn-next:disabled {
            background: #e2e8f0;
            color: #94a3b8;
            cursor: not-allowed;
            transform: none;
        }

        .btn-next:not(:disabled):hover {
            background: linear-gradient(135deg, #7c3aed 0%, #6d28d9 100%);
            transform: translateY(-2px);
        }

        .results-container {
            text-align: center;
        }

        .score-circle {
            width: 128px;
            height: 128px;
            background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 24px;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
        }

        .score-text {
            background: white;
            width: 112px;
            height: 112px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            font-weight: 800;
            color: #ea580c;
        }

        .results-title {
            font-size: 28px;
            font-weight: 800;
            color: #1e293b;
            margin-bottom: 16px;
        }

        .results-message {
            background: #dcfce7;
            border: 2px solid #4ade80;
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 32px;
        }

        .results-score {
            font-size: 24px;
            font-weight: 700;
            color: #166534;
            margin-bottom: 12px;
        }

        .results-instruction {
            color: #15803d;
            font-size: 16px;
            line-height: 1.5;
        }

        .btn-restart {
            background: linear-gradient(135deg, #8b5cf6 0%, #ec4899 100%);
            color: white;
            font-weight: 600;
        }

        .btn-restart:hover {
            background: linear-gradient(135deg, #7c3aed 0%, #db2777 100%);
            transform: translateY(-2px);
        }

        .next-text {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .siren-container {
            display: none;
            text-align: center;
            margin: 20px 0;
        }

        .siren-text {
            color: #dc2626;
            font-size: 24px;
            font-weight: bold;
            margin: 10px 0;
        }

        @media (max-width: 480px) {
            .card {
                padding: 24px;
            }
            
            h1 {
                font-size: 24px;
            }
            
            .question-text {
                font-size: 18px;
            }
            
            .score-circle {
                width: 100px;
                height: 100px;
            }
            
            .score-text {
                width: 84px;
                height: 84px;
                font-size: 24px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Language Selection Screen -->
        <div id="language-screen" class="screen active">
            <div class="card">
                <h1 id="welcome-title">Kazakh Culture Quiz!</h1>
                <button id="btn-en" class="btn btn-en">English</button>
                <button id="btn-zh" class="btn btn-zh">中文</button>
            </div>
        </div>

        <!-- Quiz Screen -->
        <div id="quiz-screen" class="screen">
            <div class="progress-container">
                <div class="progress-header">
                    <span id="question-counter">Question 1/10</span>
                    <span id="progress-percent">10%</span>
                </div>
                <div class="progress-bar">
                    <div id="progress-fill" class="progress-fill" style="width: 10%;"></div>
                </div>
            </div>
            <div class="card">
                <img id="question-image" class="question-image" src="" alt="Question illustration">
                <h2 id="question-text" class="question-text"></h2>
                <div id="options-container" class="options-container"></div>
                <div id="explanation" class="explanation" style="display: none;"></div>
                <button id="btn-next" class="btn btn-next" disabled>
                    <span class="next-text">
                        <span id="next-text">Next Question</span>
                        <i class="fas fa-chevron-right"></i>
                    </span>
                </button>
            </div>
        </div>

        <!-- Results Screen -->
        <div id="results-screen" class="screen">
            <div class="card">
                <div class="results-container">
                    <div class="score-circle">
                        <div class="score-text" id="final-score">0/10</div>
                    </div>
                    <h2 id="results-title" class="results-title">Results!</h2>
                    <div id="results-message" class="results-message"></div>
                    <button id="btn-restart" class="btn btn-restart">
                        <i class="fas fa-redo"></i>
                        <span id="restart-text">Take Quiz Again</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Create siren audio
        const sirenAudio = new Audio();
        sirenAudio.src = "audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUX7Tp66hVFApGn+DyvmwhBSdsu+7jazEIE1u5c+IAACAASURBVOfZo0oUDjyV3fLIeSwFJW7A8NyUQQsUXrfr7K1YFQlFoODxv2whBSZtuu3iazEIE1q4c+EAACAASURBVOfZokkUDjqV3PLJeiwFJG3B8NyVQgwUXrfq7a5ZFQlEoeDxwGwiBSVuuu3jazIIE1q4c+IAACAASURBVOfZpUoUDjyV3PLKeSwFJG3C8NyWQgwUXrfq7q9aFQlEoeDxwWwiBSVuuu3kbDMIE1q4c+IAACAASURBVOfZpksUDj2V3PPLeiwFJG7D8NyXQwwUX7fr77BaFQlFoeDxwm0iBSVvuu3kbTQIE1u4dOIAACAASURBVOfap0wUDj6V3fPMeSwFJG7E8NyYQwwUX7js8LFbFQlFoeDxw24iBSVvuu3kbjUIE1y4dOIAACAASURBVOfaqE0UDj+V3fTNeiwFJG/F8NyZRAwUX7ns8bJcFQlGoeDxxG8iBSVwuu3kbl0IE124dOIAACAASURBVOfaqU4UDkCV3fTPeSwFJXDG8NyfRQwUX7rt8rRdFQlHoeDxxXEiBSVxuu3lcF4IE164dOIAACAASURBVOfarlAUDkGV3fTRfSwFJnHH8NygRgwUX7vu87ZeFQlIoeDxxnIiBSVyuu3mcV8IE1+4dOIAACAASURBVOfar1EUDkKV3fTSfiwFJ3LI8NyiRwwUX7zv9LdfFQlJouDxx3QiBSVzuu3ncmEIE2C4dOIAACAASURBVOfasFIUDkOW3fTUfywFJ3PJ8NykSAwUX73w9blgFQlKouDxyHUgBSV0uu3odGIIE2G4dOIAACAASURBVOfasVMUDkSX3fTVgCwFJ3TK8NymSgwUX77x9rtgFQlLouDxyXYfBSV1uu3pdWMIE2K4dOIAACAASURBVOfaslQUDkWY3fTWgSwFJ3XL8NynSwwUX7/y97xhFQlMouDxyngfBSV2uu3qd2QIE2O4deIAAC8ASURBVOfas1UUDkaZ3fTXgiwFJ3bM8NyoTAwUX7/z+L5iFQlNouDxynkfBSV3uu3reGUJE2S4deIAAC8ASURBVOfatFYUDkeb3fTYgywFJ3fN8NypTQwUX8D0+b9jFQlOouDxynofBSV4uu3re2cJE2W4deIAAC8ASURBVOfatlcUDkih3fbZhiwFJ3jO8NyrTgwUX8H1+sBkFQlPouDxy3sfBSV5uu3rfGgJE2a4deIAAC8ASURBVOfat1gUDkmj3vfahywFJ3nP8NysTwwUX8L2+8FlFQlQouDxzHwfBSV6uu3rfWkJE2e4deIAAC8ASURBVOfauFkUDkql3/jbiiwFJ3rQ8NytUAwUX8P3/MJmFQlRouDxzX0fBSV7uu3rflkJE2i4deIAAC8ASURBVOfauVoUDkun4PndjSwFJ3vR8NyvUQwUX8T4/cNoFQlSouDxzn8fBSV8uu3rgFoJE2u4deIAAC8ASURBVOfauVwUDk2p4frehCwFJ3zS8NywUgwUX8X5/sRpFQlTouDxz4AfBSV9uu3rgVsJE2y4deIAAC8ASURBVOfau14UDk+q4vzfhSwFJ33T8NyxUwwUX8b6/8VqFQlUouDx0IEfBSV+uu3rhFwJE224deIAAC8ASURBVOfavF8UDlCr4/3ghCwFJ37U8Ny0VAwUX8j7gMZrFQlVouDx0YIfBSV/uu3rhV0JE264deIAAC8ASURBVOfavWEUDlGs5f7ihSwFJ3/V8Ny1VQwUX8r8gshsFQlWouDx0oMfBSWAuu3rh14JE2+4deIAAC8ASURBVOfavmIUDlKu5v/ihCwFJ4DW8Ny2VgwUX8z9hMttFQlXouDx04QfBSWBuu3riF8JE3C4deIAAC8ASURBVOfav2QUDlOw5//ihCwFJ4HX8Ny3VwwUX87+hcxuFQlYouDx1IUfBSWCuu3riWAJE3G4deIAAC8ASURBVOfawGcUDlW06QDjhCwFJ4LY8Ny4WAwUX9D/h85vFQlZouDx1YYfBSWDuu3ri2EJE3K4deIAAC8ASURBVOfawWoUDla36gLkhCwFJ4PZ8Ny5WQwUX9L/ic9wFQlauuDx1ogfBSWEuu3rjGIJE3O4deIAAC8ASURBVOfaw20UDle66wTlhCwFJ4Ta8Ny6WgwUX9T/i9BxFQlbuuDx14kfBSWFuu3rjWMJE3S4deIAAC8ASURBVOfaxG8UDli97AbmhCwFJ4Xb8Ny7WwwUX9b/jNFyFQlbuuDx2IofBSWGuu3rjmQJE3W4deIAAC8ASURBVOfaxXEUDlm/7QfniSwFJ4bc8Ny8XAyfX9j/j9JzFQlcuuDx2YsfBSWHuu3rj2UJE3a4deIAAC8ASURBVOfaxnIUDlrC7gnoiSwFJ4fd8Ny9XQzgX9n/ldN0FQlduuDx2owfBSWIuu3rkGYJE3e4deIAAC8ASURBVOfax3QUDlvF7wzqiiwFJ4je8Ny+XgzgYNr/ltR1FQleuuDx244fBSWJuu3rkWcJE3i4deIAAC8ASURBVOfayHUUDlzG8A7riywFJ4nf8NzAXgzgYdv/ltR1FQlfuuDx3I8fBSWKuu3rkmkJE3m4deIAAC8ASURBVOfayXYUDl3I8RDtjiwFJ4rg8NzBXwzgZNz/ltR1FQlguuDx3ZAfBSWLuu3rlGoJE3q4deIAAC8ASURBVOfayngUDl7K8RPvjywFJ4vh8NzCXwzgZd7/ltR1FQlhuvDx3pEfBSWMuu3rlmsJE3u4deIAAC8ASURBVOfay3kUDl/N8hfylCwFJ4zi8NzDXwzgZ9//ltR1FQliuvDx35IfBSWNuu3rmG0JE3y4deIAAC8ASURBVOfazHoUDmDP8xrwliwFJ43j8NzEXwzgaeEAmdV2FQljuvDx4JMfBQWOuu3rmW4JE324deIAAC8ASURBVOfazXsUDmHQ9B7ynSwFJ47k8NzFXwzgauIAmtZ3FQlkuvDx4ZQfBQWPuu3rm28JE364deIAAC8ASURBVOfazn0UDmLR9SD0oCwFJ4/l8NzGXwzgbOMAmtZ3FQlluvDx4pUfBQWQuu3rnHAJE4C4deIAAC8ASURBVOfaz34UDmTT9iL2oywFJ5Dm8NzHXwzgb+QAmtZ3FQlmuvDx45YfBQWRuu3rnXEJE4G4deIAAC8ASURBVOfa0IADJNH3I/ekLAWgXQDhAJvWeBULZbrx8uGXHwWRuu3roHIJE4K4deIAAC8ASURBVOfa0YEDJdP4JfilLAXhXQHiAJzXeRULZrvx8+OYHwWSuu3rolkKBJO58fTkmB8Fkrrt66NbCgSTuvH15ZgfBZO67eurXAoEk7vx9ueYHwWUuu3rrF0KBJO88ffomR8FlLrt665eCgSTvfH56pofBZS67euvXwoElL/x+u2bHwWVuu3rsGAKEpbA8frvmh8Flrrt67FhChKXwvL88JwfBZa67eu0YgoTmMTz/fKaHwWXuu3rtmIKE5nH9f/zmh8FmLrt67djChSbx/T/+JsfBZm67eu5ZAoUm8f1//ubHwWauu3rt2QKFLDA9P/8nB8Fmrrt67hlChWwxPT//J0fBZu67eu6ZQoWssT1/v2dHwWbuu3ru2YKF7PF9f78nh8FnLrt67xnChe0xvX9+54fBZ267eu9aAoYtsf1/fueHwWeuu3rvmgKGLjI9f37nx8Fnrvt68BoChi6yPX8+qAfBZ+77evCaAoYu8n2/PmgHwWgu+3rxmkKGL3K9vz5oR8Fobvt68VqChi+y/b8+KEfBaK77evGawoZwMz2+/igHwWju+3rx2wKGcHN9vr3oh8Fo7vt68ltChnFzvb69qMfBaS77evKbQoax8/2+fWiHwWlu+3ry24KHNDQ9vj0ox8Fprrt681vChzV0fb39KQfBae67evPcAoc2NL29vOlHwWouu3r0XEKHdvU9vXypR8Fqbrt69RyChzd1fb086YfBaq67evVcwoe39b29POoHwWsuv//";
        
        // Quiz data
        const quizData = {
            en: [
                {
                    question: "When a Kazakh says 'Go drink some tea', it means:",
                    image: "https://placehold.co/400x300/8B5CF6/FFFFFF?text=Tea+Time",
                    options: ["Just tea", "Tea, 10 dishes, and 3 hours of conversation"],
                    correctAnswer: 1,
                    explanation: "In Kazakh culture, 'drink tea' is an invitation for a full feast."
                },
                {
                    question: "What does 'mother's brother' mean for Kazakhs?",
                    image: "https://placehold.co/400x300/EF4444/FFFFFF?text=Naǵashy",
                    options: ["Delivery guy", "Free restaurant"],
                    correctAnswer: 1,
                    explanation: "Mother's side of the family are obligated to feed you for free."
                },
                {
                    question: "Math question: If invited to a wedding at 7 PM, you should arrive at:",
                    image: "https://placehold.co/400x300/10B981/FFFFFF?text=Wedding",
                    options: ["6:30 PM", "7:00 PM", "8:00 PM", "9:00 PM"],
                    correctAnswer: 3,
                    explanation: "Kazakh time is flexible! 7 PM invitation means you can arrive anytime, even at 9."
                },
                {
                    question: "If Kazakh people says (Did you come?), they actually mean:",
                    image: "https://placehold.co/400x300/F59E0B/FFFFFF?text=Greetings",
                    options: ["Are you here?", "Where have you been? I missed you!"],
                    correctAnswer: 1,
                    explanation: "It's not about your arrival, it's about expressing how much they missed you."
                },
                {
                    question: "When visiting a Kazakh home, you must:",
                    image: "https://placehold.co/400x300/06B6D4/FFFFFF?text=Hospitality",
                    options: ["Bring a small gift", "Refuse food 3 times before accepting"],
                    correctAnswer: 1,
                    explanation: "Refusing food shows respect, but they'll insist until you accept."
                },
                {
                    question: "The most important thing at a Kazakh dining table is:",
                    image: "https://placehold.co/400x300/8B5CF6/FFFFFF?text=Dastarkhan",
                    options: ["Having enough chairs", "Never letting the guest's plate be empty"],
                    correctAnswer: 1,
                    explanation: "A good host keeps refilling your plate - it's a sign of respect and care, they will even give you their seats."
                },
                {
                    question: "If a Kazakh elder offers you kumys (fermented horse's milk), you should:",
                    image: "https://placehold.co/400x300/16A34A/FFFFFF?text=Kumys",
                    options: ["Politely decline", "Drink it all and ask for more."],
                    correctAnswer: 1,
                    explanation: "Refusing kumys can be seen as disrespectful. Better to try at least a little bit"
                },
                {
                    question: "When toasting at a Kazakh celebration, you should:",
                    image: "https://placehold.co/400x300/DC2626/FFFFFF?text=Toast",
                    options: ["Drink quickly", "Hold your glass lower than elders"],
                    correctAnswer: 1,
                    explanation: "Showing respect to elders by holding your glass lower is essential"
                },
                {
                    question: "Do you know Dimash Kudaibergen?",
                    image: "https://placehold.co/400x300/7C3AED/FFFFFF?text=Compliment",
                    options: ["Yes", "Yes"],
                    correctAnswer: [1, 2], 
                    explanation: "Yes"
                },
                {
                    question: "Have you watched Borat?",
                    image: "https://placehold.co/400x300/6B7280/FFFFFF?text=Borat",
                    options: ["Yes", "No"],
                    correctAnswer: 1,
                    explanation: "Borat doesn't represent real Kazakh culture at all btw."
                }
            ],
            zh: [
                {
                    question: "当哈萨克人说'去喝点茶吧'，意思是：",
                    image: "https://placehold.co/400x300/8B5CF6/FFFFFF?text=喝茶时间",
                    options: ["只是喝茶", "茶、10道菜和3小时的聊天"],
                    correctAnswer: 1,
                    explanation: "在哈萨克文化中，'喝点茶'是邀请你参加盛宴和长时间款待！"
                },
                {
                    question: "对哈萨克人'舅爹'是什么意思？",
                    image: "https://placehold.co/400x300/EF4444/FFFFFF?text=Naǵashy",
                    options: ["外卖小哥", "免费餐厅"],
                    correctAnswer: 1,
                    explanation: "Naǵashy指你母亲家的亲戚——他们有义务免费招待你！"
                },
                {
                    question: "数学题：如果被邀请7点参加婚礼，你应该几点到？",
                    image: "https://placehold.co/400x300/10B981/FFFFFF?text=婚礼",
                    options: ["6:30", "7:00", "8:00", "9:00"],
                    correctAnswer: 3,
                    explanation: "哈萨克时间很灵活！7点邀请意味着你可以随时到达，甚至9点."
                },
                {
                    question: "当有人说'（你来了吗？）'，他们实际上意思是：",
                    image: "https://placehold.co/400x300/F59E0B/FFFFFF?text=问候",
                    options: ["你到了吗？", "你去哪儿了？我想你了！"],
                    correctAnswer: 1,
                    explanation: "这不是问你是否到达，而是表达他们有多想念你！"
                },
                {
                    question: "拜访哈萨克家庭时，你必须：",
                    image: "https://placehold.co/400x300/06B6D4/FFFFFF?text=款待",
                    options: ["带个小礼物", "拒绝食物3次后再接受"],
                    correctAnswer: 1,
                    explanation: "拒绝食物表示尊重，但他们会一直坚持直到你接受！"
                },
                {
                    question: "在哈萨克达斯特卡汗（餐桌）上最重要的是：",
                    image: "https://placehold.co/400x300/8B5CF6/FFFFFF?text=达斯特卡汗",
                    options: ["有足够的椅子", "绝不让客人的盘子空着"],
                    correctAnswer: 1,
                    explanation: "好主人会不断给你添菜——这是尊重和关心的标志！"
                },
                {
                    question: "如果哈萨克长辈给你马奶酒（kumys），你应该：",
                    image: "https://placehold.co/400x300/16A34A/FFFFFF?text=马奶酒",
                    options: ["礼貌拒绝", "全部喝完并要求再来一杯！"],
                    correctAnswer: 1,
                    explanation: "拒绝马奶酒可能被视为不尊重。最好至少尝试一点！"
                },
                {
                    question: "在哈萨克庆祝活动中祝酒时，你应该：",
                    image: "https://placehold.co/400x300/DC2626/FFFFFF?text=祝酒",
                    options: ["快速喝完", "酒杯举得比长辈低"],
                    correctAnswer: 1,
                    explanation: "通过举低酒杯向长辈表示尊重是非常重要的！"
                },
                {
                    question: "你知道di'ma'shi          correctAnswer: 3,
                    explanation: "哈萨克时间很灵活！7点邀请意味着你可以随时到达，甚至9点."
                },
                {
                    question: "当有人说'（你来了吗？）'，他们实际上意思是：",
                    image: "https://placehold.co/400x300/F59E0B/FFFFFF?text=问候",
                    options: ["你到了吗？", "你去哪儿了？我想你了！"],
                    correctAnswer: 1,
                    explanation: "这不是问你是否到达，而是表达他们有多想念你！"
                },
                {
                    question: "拜访哈萨克家庭时，你必须：",
                    image: "https://placehold.co/400x300/06B6D4/FFFFFF?text=款待",
                    options: ["带个小礼物", "拒绝食物3次后再接受"],
                    correctAnswer: 1,
                    explanation: "拒绝食物表示尊重，但他们会一直坚持直到你接受！"
                },
                {
                    question: "在哈萨克达斯特卡汗（餐桌）上最重要的是：",
                    image: "https://placehold.co/400x300/8B5CF6/FFFFFF?text=达斯特卡汗",
                    options: ["有足够的椅子", "绝不让客人的盘子空着"],
                    correctAnswer: 1,
                    explanation: "好主人会不断给你添菜——这是尊重和关心的标志！"
                },
                {
                    question: "如果哈萨克长辈给你马奶酒（kumys），你应该：",
                    image: "https://placehold.co/400x300/16A34A/FFFFFF?text=马奶酒",
                    options: ["礼貌拒绝", "全部喝完并要求再来一杯！"],
                    correctAnswer: 1,
                    explanation: "拒绝马奶酒可能被视为不尊重。最好至少尝试一点！"
                },
                {
                    question: "在哈萨克庆祝活动中祝酒时，你应该：",
                    image: "https://placehold.co/400x300/DC2626/FFFFFF?text=祝酒",
                    options: ["快速喝完", "酒杯举得比长辈低"],
                    correctAnswer: 1,
                    explanation: "通过举低酒杯向长辈表示尊重是非常重要的！"
                },
                {
                    question: "你知道迪玛希是谁吗",
                    image: "https://placehold.co/400x300/7C3AED/FFFFFF?text=赞美",
                    options: ["知道", "是的"],
                    correctAnswer: [1, 2],
                    explanation: "当然"
                },
                {
                    question: "你看过《波拉特》吗？",
                    image: "https://placehold.co/400x300/6B7280/FFFFFF?text=波拉特",
                    options: ["看过", "没看过"],
                    correctAnswer: 1,
                    explanation: "好选择！《波拉特》完全不能代表真正的哈萨克文化。"
                }
            ]
        };

        // State variables
        let currentLanguage = null;
        let currentQuestion = 0;
        let userAnswers = [];
        let showResult = false;
        let selectedOption = null;

        // DOM Elements
        const screens = {
            language: document.getElementById('language-screen'),
            quiz: document.getElementById('quiz-screen'),
            results: document.getElementById('results-screen')
        };

        const elements = {
            // Language screen
            welcomeTitle: document.getElementById('welcome-title'),
            btnEn: document.getElementById('btn-en'),
            btnZh: document.getElementById('btn-zh'),
            
            // Quiz screen
            questionCounter: document.getElementById('question-counter'),
            progressPercent: document.getElementById('progress-percent'),
            progressFill: document.getElementById('progress-fill'),
            questionImage: document.getElementById('question-image'),
            questionText: document.getElementById('question-text'),
            optionsContainer: document.getElementById('options-container'),
            explanation: document.getElementById('explanation'),
            btnNext: document.getElementById('btn-next'),
            nextText: document.getElementById('next-text'),
            
            // Results screen
            finalScore: document.getElementById('final-score'),
            resultsTitle: document.getElementById('results-title'),
            resultsMessage: document.getElementById('results-message'),
            btnRestart: document.getElementById('btn-restart'),
            restartText: document.getElementById('restart-text')
        };

        // Event Listeners
        elements.btnEn.addEventListener('click', () => selectLanguage('en'));
        elements.btnZh.addEventListener('click', () => selectLanguage('zh'));
        elements.btnNext.addEventListener('click', handleNext);
        elements.btnRestart.addEventListener('click', resetQuiz);

        // Functions
        function selectLanguage(lang) {
            currentLanguage = lang;
            currentQuestion = 0;
            userAnswers = [];
            showResult = false;
            selectedOption = null;
            
            // Update translations
            updateTranslations();
            
            // Show quiz screen
            showScreen('quiz');
            loadQuestion();
        }

        function updateTranslations() {
            if (currentLanguage === 'en') {
                elements.welcomeTitle.textContent = 'Kazakh Culture Quiz!';
                elements.nextText.textContent = currentQuestion === 9 ? 'View Results' : 'Next Question';
                elements.restartText.textContent = 'Take Quiz Again';
            } else {
                elements.welcomeTitle.textContent = '哈萨克文化测验！';
                elements.nextText.textContent = currentQuestion === 9 ? '查看结果' : '下一题';
                elements.restartText.textContent = '重新参加测验';
            }
        }

        function showScreen(screenName) {
            Object.keys(screens).forEach(name => {
                screens[name].classList.remove('active');
            });
            screens[screenName].classList.add('active');
        }

        function loadQuestion() {
            const questionData = quizData[currentLanguage][currentQuestion];
            
            // Update question counter and progress
            elements.questionCounter.textContent = currentLanguage === 'en' 
                ? `Question ${currentQuestion + 1}/10`
                : `问题 ${currentQuestion + 1}/10`;
            
            const progressPercent = Math.round(((currentQuestion + 1) / 10) * 100);
            elements.progressPercent.textContent = `${progressPercent}%`;
            elements.progressFill.style.width = `${progressPercent}%`;
            
            // Update question content
            elements.questionImage.src = questionData.image;
            elements.questionText.textContent = questionData.question;
            
            // Clear and add options
            elements.optionsContainer.innerHTML = '';
            questionData.options.forEach((option, index) => {
                const optionDiv = document.createElement('div');
                optionDiv.className = 'option';
                optionDiv.textContent = option;
                optionDiv.addEventListener('click', () => selectOption(index));
                elements.optionsContainer.appendChild(optionDiv);
            });
            
            // Hide explanation and disable next button
            elements.explanation.style.display = 'none';
            elements.btnNext.disabled = true;
            
            // Update next button text
            if (currentLanguage === 'en') {
                elements.nextText.textContent = currentQuestion === 9 ? 'View Results' : 'Next Question';
            } else {
                elements.nextText.textContent = currentQuestion === 9 ? '查看结果' : '下一题';
            }
        }

        function selectOption(optionIndex) {
            if (showResult) return;
            
            selectedOption = optionIndex;
            userAnswers[currentQuestion] = optionIndex;
            showResult = true;
            
            // Special handling for Borat question (last question)
            if (currentQuestion === 9) {
                if (optionIndex === 0) {
                    // User said "Yes" to Borat - play siren
                    try {
                        sirenAudio.play().catch(e => console.log("Audio play failed:", e));
                    } catch (e) {
                        console.log("Siren audio not supported");
                    }
                }
            }
            
            // Show results for each option
            const options = elements.optionsContainer.querySelectorAll('.option');
            const questionData = quizData[currentLanguage][currentQuestion];
            
            options.forEach((option, index) => {
                option.removeEventListener('click', () => selectOption(index));
                if (index === questionData.correctAnswer) {
                    option.className = 'option correct';
                } else if (index === selectedOption) {
                    option.className = 'option incorrect';
                }
            });
            
            // Show explanation
            elements.explanation.textContent = questionData.explanation;
            elements.explanation.style.display = 'block';
            
            // Enable next button
            elements.btnNext.disabled = false;
        }

        function handleNext() {
            if (currentQuestion < 9) {
                currentQuestion++;
                showResult = false;
                selectedOption = null;
                loadQuestion();
            } else {
                // Show results screen
                showResults();
            }
        }

        function showResults() {
            const score = calculateScore();
            
            // Update results screen based on score
            elements.finalScore.textContent = `${score}/10`;
            
            let message = "";
            if (score >= 7) {
                message = currentLanguage === 'en' 
                    ? "<strong>You're Kazakh?</strong><br>Either you're actually Kazakh or you've been adopted by a Kazakh family for sure" 
                    : "<strong>你是哈萨克人吗？</strong><br>要么你真的是哈萨克人，要么你已经被哈萨克家庭收养了. 真的真的";
            } else if (score >= 5) {
                message = currentLanguage === 'en' 
                    ? "<strong>You have Kazakh blood!</strong><br>There's definitely some Kazakh heritage flowing in your veins broski" 
                    : "<strong>你有哈萨克血统！</strong><br>你的血液中肯定流淌着哈萨克人的血脉！问问你父母吧。。。";
            } else {
                message = currentLanguage === 'en' 
                    ? "<strong>Find a Kazakh friend!</strong><br>Time to make some Kazakh friends bro" 
                    : "<strong>找个哈萨克朋友！</strong><br>是时候交些哈萨克朋友，了解他们精彩的文化了！";
            }
            
            elements.resultsMessage.innerHTML = message;
            elements.resultsTitle.textContent = currentLanguage === 'en' ? 'Results!' : '结果！';
            
            showScreen('results');
        }

        function calculateScore() {
            let score = 0;
            const quiz = quizData[currentLanguage];
            for (let i = 0; i < 10; i++) {
                if (userAnswers[i] === quiz[i].correctAnswer) {
                    score++;
                }
            }
            return score;
        }

        function resetQuiz() {
            currentLanguage = null;
            currentQuestion = 0;
            userAnswers = [];
            showResult = false;
            selectedOption = null;
            showScreen('language');
        }
    </script>
</body>
</html>

